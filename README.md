# Used-Car-Price-Predict-Project

🚗 중고차 시세 예측 프로그램: 당신의 합리적인 중고차 구매를 위한 안내서

🌟 프로젝트 개요

중고차 시장은 신차 시장의 약 2배 규모로 꾸준히 성장하고 있습니다. 하지만 중고차 시세는 불투명하며, 구매자들은 합리적인 가격을 판단하기 어렵다는 문제에 직면합니다. 저희 '예측했조' 팀은 이러한 어려움을 해소하고 중고차 구매자들이 신뢰할 수 있는 정보를 바탕으로 합리적인 결정을 내릴 수 있도록 돕는 시세 예측 프로그램을 개발했습니다.

✨ 주요 기능 및 기술 스택

본 프로젝트는 웹 크롤링을 통해 데이터를 수집하고, 수집된 데이터를 전처리하여 머신러닝 모델을 학습시킨 후, 사용자 친화적인 GUI를 통해 예측 결과를 제공합니다.

1. 웹 크롤링 (Web Crawling)

목표: 중고차 매물 정보(10,767개)를 자동으로 수집
기술: Python, Selenium
주요 기능:
데이터 크롤링
웹페이지 구조 및 CSS Selector 확인
반복문 활용하여 필요한 매물 데이터(1페이지 당 50개)  추출
추출된 데이터를 목록(리스트)에 할당
-  뽑아낸 데이터 값을 요소에 할당
-  요소의 텍스트 추출 및 공백 제거해서 다시 할당
-  원하는 컬럼명 형성 후 컬럼 리스트에 할당

다음 페이지 자동 이동 및 최종 페이지 이후 크롤링링 종료 기능 

트러블 슈팅:
페이지 이동 자동화: 기존에는 사람이 페이지 수를 직접 설정하고 URL 변경 시 재설정해야 하는 불편함이 있었으나, CSS Selector를 이용해 코드 유지보수성을 높이고 페이지 수 자동 설정을 구현공동 Selector 인한 중복 크롤링: CSS selector의 정밀도를 높여 일반 등록 페이지의 데이터만 추출하도록 개선하여 중복 크롤링 문제를 해결


2. 데이터 전처리 (Data Processing)

목표: 수집된 원시 데이터를 머신러닝 모델 학습에 적합한 형태로 가공(10,557개)합니다.
기술: Python, Pandas, Selenium
주요 기능:
중고차 정보 데이터프레임 생성
모델명 데이터 정제 (예: '현대 그랜저' -> 'grandeur')
연료 타입 데이터 정제 (예 : ’ 가솔린 + 전기’ -> ‘Hybrid’ ) 
주행거리 데이터 정제 (예 : 25,626km -> 25626 )
가격 데이터 정제 (예 : 2,470만원 -> 2470 )
연도 데이터를 원하는 연형 데이터로 전처리 (예 : 22/05식(23년형) -> 2023 )

트러블 슈팅:
광고 배너로 인한 데이터 공백: 광고 배너로 인해 발생하던 데이터 공백을 NaN 값으로 대체 후 삭제하여 데이터의 무결성을 확보

3. 머신러닝 (Machine Learning)
목표: 전처리된 데이터를 바탕으로 중고차 시세 예측 모델을 구축합니다.
기술: matplotlib, scikit-learn, numpy, pandas, joblib
주요 기능:
다중 브랜드 데이터 통합 
- 여러 브랜드의 CSV 파일을 하나로 통합 (현재는 hyundai.csv만 사용)
- brands 리스트에 브랜드명을 추가하면 확장 가능
- 중복 데이터 제거를 통해 모델 신뢰도 향상
이상치 탐지 및 제거 
- describe() 함수로 가격 통계 확인
- Boxplot 시각화를 통해 이상치 탐지
- 500만 원 이하 또는 4,000만 원 이상의 가격은 이상치로 판단하여 제거
주행거리 구간화
- mileage 값을 10,000km 단위 구간으로 분할
 (예 : mileage_0_10000, mileage_10001_20000 등)
- 기존 mileage column을 제거하고 구간화된 column을 사용
원핫인코딩 (One-Hot Encoding)
- year는 숫자지만 범주형으로 판단하고 문자열 처리
- brand, model, year, oilingtype, mileage에 적용
- 최종 결과는 car_prive_remove_one_hot_encoding.csv로 저장
데이터 분리:
- 전처리된 데이터를 불러와 x(입력), y(출력)으로 분리
- 학습/검증 데이터는 7:3 비율로 분할
기본 성능 평가
- GradientBoostingRegressor를 기본 설정으로 초기 성능 확인
- 5-Fold 교차 검증(K-Fold CV) 사용
- 손실 함수는 Huber Loss를 사용 (이상치에 강인함)
하이퍼파라미터 튜닝(GridSearchCV 단계별 수행)
- 1차 튜닝 : n_estimators
  결정 트리 개수 (과대하면 과적합, 과소하면 성능 저하)
- 2차 튜닝 : learning_rate
  각 트리가 전체에 기여하는 정도 (작을수록 안정적이나 느림)
- 3차 튜닝 : max_depth
  각 트리의 최대 깊이 (깊을수록 복잡, 얕으면 단순)
- 4차 튜닝 : min_samples_leaf
  리프 노드에 있어야 할 최소 샘플 수 (과대/과소적합 조절)
- 5차 튜닝 : min_samples_split
  노드 분할 최소 샘플 수 (작으면 복잡, 크면 단순 트리)

최종 평가 및 저장
- 최적 파라미터로 학습된 모델을 car.model로 저장
- 성능 평가 지표로 MAE(Mean Absolute Error) 사용
성능 향상 결과: 이상치 제거 후 모델의 테스트 정확도는 56.25%에서 90.81%로 약 34%p 향상되었으며, 평균 오차(MAE)는 2,032만원에서 197만원으로 약 10배 감소했습니다.

4. GUI 디자인 (GUI Design)
목표: 사용자가 쉽고 직관적으로 프로그램을 이용할 수 있도록 사용자 인터페이스를 제공합니다.

기술: PySide6, Qt Designer

주요 기능:
Qt Designer로 제작된 .ui 파일 로딩
사용자 입력(차량 모델명, 연식, 오일 타입, 주행 거리)에 따른 점진적 데이터 필터링
예측 결과 출력 (최소/최대/평균 가격, 평균 절대 오차)
차량 모델명과 일치하는 이미지 출력 기능

사용자 경험 개선: CSV 파일 내의 모델명(grandeur)과 오일 타입(oilingtype_LPG)을 사용자 친화적인 한글(그랜저, LPG)로 변환하여 표시합니다. 주행 거리 역시 가독성 높은 형식(0~10,000km)으로 자동 변환 및 매핑됩니다.

트러블 슈팅:QComboBox 동적 필터링 문제: Qt Designer에서 생성된 QComboBox의 동적 필터링이 어려워, FilterComboBox 클래스를 정의하고 Python에서 이를 교체하여 팝업 시점에 필터 자동 갱신 및 선택 값 초기화가 가능하도록 개선했습니다.
🚀 기대 효과 및 향후 계획

기대 효과
합리적인 소비 결정 지원: 중고차 시세 예측 정보를 제공하여 구매자들이 신뢰도 높은 기준을 바탕으로 합리적인 구매 판단을 내릴 수 있도록 돕습니다.

정보 탐색 시간 절감: 적정 가격의 중고차만 선별적으로 확인하게 함으로써 불필요한 탐색 시간을 줄이고 효율적인 의사결정을 가능하게 합니다.

향후 계획
다양한 차종으로의 확장: 현재 현대 그랜저 차종에 한정된 예측 범위를 쏘나타, 아반떼 등 다양한 차종으로 확대하여 프로그램의 범용성과 실용성을 높일 예정입니다.

팀원: 박민석, 박성훈, 변지인, 성태호 
